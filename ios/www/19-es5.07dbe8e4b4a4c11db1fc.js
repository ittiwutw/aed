function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"ct+p":function(t,e,n){"use strict";n.r(e),n.d(e,"HomePageModule",(function(){return M}));var i=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),a=n("tyNb"),c=n("mrSG"),s=n("fXoL"),l=n("tnAE"),u=n("e8h1"),b=n("Bfh1"),h=n("m/P+"),d=n("pxUr");function g(t,e){if(1&t){var n=s.Ob();s.Nb(0,"agm-marker",20),s.Vb("markerClick",(function(t){s.dc(n);var i=e.$implicit;return s.Xb().markerClick(t,i)})),s.Mb()}if(2&t){var i=e.$implicit;s.ac("latitude",i.latitude)("longitude",i.longitude)}}function p(t,e){if(1&t){var n=s.Ob();s.Nb(0,"ion-card",17),s.Nb(1,"ion-card-header"),s.Nb(2,"ion-card-title"),s.Nb(3,"button",21),s.Nb(4,"b"),s.ic(5,"X"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(6,"ion-button",3),s.Vb("click",(function(){return s.dc(n),s.Xb().help()})),s.ic(7,"\u0e19\u0e33\u0e17\u0e32\u0e07"),s.Mb(),s.Mb()}}var f,v,m,k=[{path:"",component:(f=function(){function t(e,n,i,o,r,a,c,s){var l=this;_classCallCheck(this,t),this.loadingCtrl=e,this.toastCtrl=n,this.platform=i,this.rest=o,this.storage=r,this.geolocation=a,this.alertCtrl=c,this.iab=s,this.SOS=!1,this.SOSHelp=!1,this.count=1,this.role=1,this.first=!0,this.step=1,this.alldevice=[],this.alldeviceList=[],this.height="100%",this.zoom=13,this.currentLat=13.7601366,this.currentLng=100.5659859,this.getAllDevices(),this.storage.get("userId").then((function(t){l.userData=t,console.log(t),"V"===t.userType&&setTimeout((function(){}),3e4)}))}return _createClass(t,[{key:"presentAlert",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertCtrl.create({header:"\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19\u0e40\u0e2b\u0e15\u0e38\u0e09\u0e38\u0e01\u0e40\u0e09\u0e34\u0e19",message:"\u0e01\u0e14\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e19\u0e33\u0e17\u0e32\u0e07",buttons:[{text:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",role:"cancel",handler:function(){console.log("Cancel clicked")}},{text:"\u0e19\u0e33\u0e17\u0e32\u0e07",handler:function(){n.iab.create("https://www.google.com/maps/search/?api=1&query=13.8601816,100.5128416")}}]});case 2:return e=t.sent,t.next=5,e.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnInit",value:function(){}},{key:"getAllDevices",value:function(){var t=this;console.log("get device"),this.rest.getDeviceAll().then((function(e){console.log(e),t.alldevice=e,t.loadMap()}))}},{key:"loadMap",value:function(){var t=this;this.geolocation.getCurrentPosition().then((function(e){console.log(e),t.lat=e.coords.latitude,t.lng=e.coords.longitude,t.currentLat=e.coords.latitude,t.currentLng=e.coords.longitude,new google.maps.LatLng(e.coords.latitude,e.coords.longitude),t.addMarkersToMap()})).catch((function(t){console.log("Error getting location",t)}))}},{key:"addMarkersToMap",value:function(){var t=this;this.alldevice.forEach((function(e){var n=new google.maps.LatLng(t.currentLat,t.currentLng),i=new google.maps.LatLng(e.latitude,e.longitude),o=google.maps.geometry.spherical.computeDistanceBetween(n,i);console.log((o/1e3).toFixed(2));var r=(o/1e3).toFixed(2);parseInt(r)<=5&&t.alldeviceList.push(e)}))}},{key:"sos",value:function(){3===this.count?(this.SOS=!this.SOS,this.count++,this.createEvent()):4===this.count?(this.SOS=!this.SOS,this.count=1):this.count++,this.AEDLocation="\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19\u0e44\u0e1b\u0e22\u0e31\u0e07\u0e1c\u0e39\u0e49\u0e0a\u0e48\u0e27\u0e22\u0e41\u0e25\u0e49\u0e27!!"}},{key:"createEvent",value:function(){console.log("get device"),this.rest.createEvent(this.userData.userId,this.currentLat+"/"+this.currentLng).then((function(t){console.log(t)}))}},{key:"getAllEvent",value:function(){this.rest.getEventAll().then((function(t){console.log(t)}))}},{key:"showToast",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastCtrl.create({message:t,duration:2e3,position:"middle"});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"nextStep",value:function(){this.step+=1,3===this.step&&(this.step=void 0)}},{key:"notificationPop",value:function(){this.SOSHelp=!0,this.step=3}},{key:"help",value:function(){window.open("https://maps.google.com/?q=13.7551,100.4984","_system"),this.SOSHelp=!1,this.step=1}},{key:"markerClick",value:function(t,e){this.presentConfirm(e)}},{key:"presentConfirm",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:t.deviceLocationName,message:t.deviceMark,buttons:[{text:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",role:"cancel",handler:function(){console.log("Cancel clicked")}},{text:"\u0e19\u0e33\u0e17\u0e32\u0e07",handler:function(){i.iab.create("https://www.google.com/maps/search/?api=1&query="+t.latitude+", "+t.longitude)}}]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}}]),t}(),f.\u0275fac=function(t){return new(t||f)(s.Kb(r.L),s.Kb(r.T),s.Kb(r.O),s.Kb(l.a),s.Kb(u.b),s.Kb(b.a),s.Kb(r.a),s.Kb(h.a))},f.\u0275cmp=s.Eb({type:f,selectors:[["app-home"]],decls:45,vars:29,consts:[[1,"header"],["slot","start"],["slot","end"],[3,"click"],[2,"color","white","z-index","10000","position","absolute","background-color","black","height","100vh","width","100vw","opacity","0.5"],["align","center",2,"margin-top","7vh","margin-left","-86vw"],["name","arrow-up"],["align","center",2,"margin-top","73vh","margin-left","5vw"],["name","arrow-down"],["padding","",2,"width","100vw","height","100vh","overflow","hidden"],[3,"latitude","longitude","zoom"],[3,"latitude","longitude","markerClick",4,"ngFor","ngForOf"],["vertical","center","horizontal","end","slot","fixed",2,"--background","transparent"],[2,"--background","transparent","--box-shadow","none",3,"click"],["vertical","center","horizontal","center",2,"margin-top","30vh"],["color","danger",2,"right","0","width","20vw","height","10vh",3,"click"],["name","heart"],[2,"background-color","white !important","margin-left","-5vw","margin-top","75vh","width","100vw","height","16vh","position","fixed"],[2,"float","right","background-color","transparent",3,"click"],["style","background-color:white !important;margin-left: -5vw;margin-top:75vh;width: 100vw;height:16vh;position: fixed;",4,"ngIf"],[3,"latitude","longitude","markerClick"],[2,"float","right","background-color","transparent"]],template:function(t,e){1&t&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar",0),s.Nb(2,"ion-buttons",1),s.Lb(3,"ion-menu-button"),s.Mb(),s.Nb(4,"ion-title"),s.ic(5," Home "),s.Mb(),s.Nb(6,"ion-buttons",2),s.Nb(7,"ion-button",3),s.Vb("click",(function(){return e.notificationPop()})),s.ic(8,"\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e40\u0e15\u0e37\u0e2d\u0e19"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(9,"div",4),s.Nb(10,"div",5),s.Nb(11,"p"),s.Lb(12,"ion-icon",6),s.Mb(),s.Nb(13,"p"),s.ic(14,"\u0e40\u0e21\u0e19\u0e39"),s.Mb(),s.Mb(),s.Nb(15,"div",7),s.Nb(16,"p"),s.ic(17,"\u0e01\u0e14 3 \u0e04\u0e23\u0e31\u0e49\u0e07 \u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e02\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e0a\u0e48\u0e27\u0e22\u0e40\u0e2b\u0e25\u0e37\u0e2d"),s.Mb(),s.Nb(18,"p"),s.Lb(19,"ion-icon",8),s.Mb(),s.Mb(),s.Mb(),s.Nb(20,"ion-content",9),s.Nb(21,"agm-map",10),s.hc(22,g,1,2,"agm-marker",11),s.Mb(),s.Nb(23,"ion-fab",12),s.Nb(24,"ion-button",13),s.Vb("click",(function(){return e.nextStep()})),s.ic(25),s.Mb(),s.Mb(),s.Nb(26,"ion-fab",14),s.Nb(27,"ion-fab-button",15),s.Vb("click",(function(){return e.sos()})),s.Nb(28,"ion-grid"),s.Nb(29,"ion-row"),s.Nb(30,"ion-col"),s.Lb(31,"ion-icon",16),s.Mb(),s.Mb(),s.Nb(32,"ion-row"),s.Nb(33,"ion-col"),s.Nb(34,"b"),s.ic(35,"SOS"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(36,"ion-card",17),s.Nb(37,"ion-card-header"),s.Nb(38,"ion-card-title"),s.Nb(39,"button",18),s.Vb("click",(function(){return e.sos()})),s.Nb(40,"b"),s.ic(41,"X"),s.Mb(),s.Mb(),s.Mb(),s.Nb(42,"ion-card-subtitle"),s.ic(43),s.Mb(),s.Mb(),s.Mb(),s.hc(44,p,8,0,"ion-card",19),s.Mb()),2&t&&(s.gc("z-index",1===e.step?"100000":"10"),s.Ab(9),s.gc("display",e.first&&void 0!==e.step?"":"none"),s.Ab(1),s.gc("display",1===e.step?"":"none"),s.Ab(5),s.gc("display",2===e.step?"":"none"),s.Ab(6),s.gc("height",e.height),s.ac("latitude",e.currentLat)("longitude",e.currentLng)("zoom",e.zoom),s.Ab(1),s.ac("ngForOf",e.alldeviceList),s.Ab(1),s.gc("display",void 0!==e.step?"":"none")("z-index",e.step?"100000":"10"),s.Ab(2),s.kc(" ",1==e.step?"\u0e02\u0e49\u0e32\u0e21 >>>":"\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19 >>>"," "),s.Ab(1),s.gc("z-index",2===e.step?"100000":"10")("opacity",e.SOS?"0":"1")("display",2===e.role?"none":""),s.Ab(10),s.gc("opacity",e.SOS?"1":"0"),s.Ab(7),s.jc(e.AEDLocation),s.Ab(1),s.ac("ngIf",e.SOSHelp))},directives:[r.p,r.I,r.e,r.x,r.H,r.d,r.q,r.k,d.b,i.h,r.m,r.n,r.o,r.C,r.j,r.f,r.g,r.i,r.h,i.i,d.c],styles:[".welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}.header[_ngcontent-%COMP%]{color:#fff;background:brown;--background:brown;font-family:Kanit,sans-serif!important}"]}),f)}],w=((m=function t(){_classCallCheck(this,t)}).\u0275mod=s.Ib({type:m}),m.\u0275inj=s.Hb({factory:function(t){return new(t||m)},imports:[[a.i.forChild(k)],a.i]}),m),M=((v=function t(){_classCallCheck(this,t)}).\u0275mod=s.Ib({type:v}),v.\u0275inj=s.Hb({factory:function(t){return new(t||v)},imports:[[i.b,o.a,r.J,w,d.a]]}),v)}}]);